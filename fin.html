<!DOCTYPE html>
<html>
<head>
  <title>Match Prediction with Venue</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      padding: 5px;
      max-width: 100%;
      margin: auto;
      max-height: 100%;
    }

    h2, h3 {
      color: #333;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      height: 100vh;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px 10px;
      text-align: center;
      vertical-align: middle;
    }

    th {
      background-color: #007BFF;
      color: #fff;
    }

    input[type="text"], input[type="number"], select {
      padding: 6px;
      margin: 4px 0;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    input[type="text"] {
      width: 90%;
    }

    select {
      width: 25%;
      margin-left: 5px;
    }

    button {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 12px 20px;
      margin-top: 10px;
      cursor: pointer;
      border-radius: 5px;
      font-size: 16px;
      transition: background-color 0.3s;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    button:hover {
      background-color: #218838;
    }

    #previousMatches {
      background-color: #fff;
      padding: 15px;
      border: 1px solid #ddd;
      margin-top: 20px;
      border-radius: 5px;
    }

    #output {
      background-color: #yellow;
      padding: 15px;
      border: 1px solid #ddd;
      margin-top: 15px;
      border-radius: 5px;
      text-align: center;
      font-size: 18px;
    }
    @media (max-width: 600px) {
  table, input, select, button {
    width: 100%;
  }

  input[type="text"], input[type="number"] {
    width: 100%;
  }

  select {
    width: 100%;
    margin-top: 5px;
    
  }@keyframes colorCycle {
  0%   { color: red; }
  25%  { color: blue; }
  50%  { color: green; }
  75%  { color: orange; }
  100% { color: red; }
}

h2 {
  color: #4CAF50; /* initial color */
  cursor: pointer;
  transition: color 0.5s ease;
}

h2:hover {
  animation: colorCycle 4s linear infinite;
  keyframes colorCycle {
  0%   { color: red; }
  25%  { color: blue; }
  50%  { color: green; }
  75%  { color: orange; }
  100% { color: red; }
}
}
  </style>
</head>
<body>

<h2>Premium Dashboard ðŸš€</h2>

  <table>
    <thead>
      <tr>
        <th>Home Team Last es (Scores + Venue)</th>
        <th>Away Team Last es (Scores + Venue)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input id="home1" placeholder="e.g. 2-1"><select id="home1Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away1" placeholder="e.g. 1-2"><select id="away1Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
      <tr>
        <td><input id="home2" placeholder="e.g. 0-0"><select id="home2Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away2" placeholder="e.g. 1-1"><select id="away2Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
      <tr>
        <td><input id="home3" placeholder="e.g. 3-2"><select id="home3Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away3" placeholder="e.g. 0-1"><select id="away3Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
      <tr>
        <td><input id="home4" placeholder="e.g. 1-1"><select id="home4Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away4" placeholder="e.g. 2-2"><select id="away4Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
      <tr>
        <td><input id="home5" placeholder="e.g. 0-1"><select id="home5Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away5" placeholder="e.g. 3-0"><select id="away5Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
      <tr>
        <td><input id="home6" placeholder="e.g. 2-2"><select id="home6Venue"><option value="H">H</option><option value="A">A</option></select></td>
        <td><input id="away6" placeholder="e.g. 1-0"><select id="away6Venue"><option value="H">H</option><option value="A">A</option></select></td>
      </tr>
    </tbody>
  </table>

  <h3>Enter 1 X 2 Odds</h3>
  <label>Home Win Odds: <input id="homeOdd" type="number" step="0.01" min="1" placeholder="e.g. 2.50"></label><br>
  <label>Draw Odds: <input id="drawOdd" type="number" step="0.01" min="1" placeholder="e.g. 3.10"></label><br>
  <label>Away Win Odds: <input id="awayOdd" type="number" step="0.01" min="1" placeholder="e.g. 2.80"></label><br><br>

  <h3>Enter Final Result (e.g. 2-1)</h3>
  <input id="finalResult" placeholder="Final result" pattern="[0-9\-]*" title="Only numbers and dash allowed" oninput="validateFinalResult(this)" maxlength="5"><br><br>

  <button onclick="predict()">Predict</button>
  <button onclick="saveData()">Save Final Result</button>

  <h3>Prediction Output</h3>
  <div id="output"></div>

  <div id="previousMatches"></div>
  <script>
  function validateFinalResult(input) {
  // Allow only digits and dash in final result input
  input.value = input.value.replace(/[^0-9-]/g, '');
}

function parseScore(scoreStr) {
  if (!scoreStr) return null;
  const parts = scoreStr.trim().split('-');
  if (parts.length !== 2) return null;
  const home = parseInt(parts[0]);
  const away = parseInt(parts[1]);
  if (isNaN(home) || isNaN(away)) return null;
  return { home, away };
}

function getStats(matches) {
  let wins = 0, draws = 0, losses = 0, goalsFor = 0, goalsAgainst = 0;
  for (const m of matches) {
    if (!m) continue;
    goalsFor += m.home;
    goalsAgainst += m.away;
    if (m.home > m.away) wins++;
    else if (m.home === m.away) draws++;
    else losses++;
  }
  return { wins, draws, losses, goalsFor, goalsAgainst, totalGoals: goalsFor + goalsAgainst };
}

function predictCorrectScore(homeAvgGoals, awayAvgGoals) {
  const maxGoals = 5;
  let predictedCS = '';
  let highestProbability = 0;

  for (let homeGoals = 0; homeGoals <= maxGoals; homeGoals++) {
    for (let awayGoals = 0; awayGoals <= maxGoals; awayGoals++) {
      const homeProb = Math.pow(homeAvgGoals, homeGoals) * Math.exp(-homeAvgGoals) / factorial(homeGoals);
      const awayProb = Math.pow(awayAvgGoals, awayGoals) * Math.exp(-awayAvgGoals) / factorial(awayGoals);
      const matchProb = homeProb * awayProb;

      if (matchProb > highestProbability) {
        highestProbability = matchProb;
        predictedCS = `${homeGoals}-${awayGoals}`;
      }
    }
  }

  return predictedCS;
}

function factorial(n) {
  return n <= 1 ? 1 : n * factorial(n - 1);
}

function predict() {
  const homeOdd = parseFloat(document.getElementById('homeOdd').value);
  const drawOdd = parseFloat(document.getElementById('drawOdd').value);
  const awayOdd = parseFloat(document.getElementById('awayOdd').value);

  if (isNaN(homeOdd) || isNaN(drawOdd) || isNaN(awayOdd)) {
    alert('Please enter valid odds for Home, Draw, and Away.');
    return;
  }

  const homeMatchesRaw = [];
  for (let i = 1; i <= 6; i++) {
    const score = parseScore(document.getElementById(`home${i}`).value);
    const venue = document.getElementById(`home${i}Venue`).value;
    homeMatchesRaw.push({ score, venue });
  }
  const homeMatches = homeMatchesRaw.filter(m => m.score).map(m => m.score);
  if (homeMatches.length === 0) {
    alert('No valid matches entered for the Home Team.');
    return;
  }

  const awayMatchesRaw = [];
  for (let i = 1; i <= 6; i++) {
    const score = parseScore(document.getElementById(`away${i}`).value);
    const venue = document.getElementById(`away${i}Venue`).value;
    awayMatchesRaw.push({ score, venue });
  }
  const awayMatches = awayMatchesRaw.filter(m => m.score).map(m => m.score);
  if (awayMatches.length === 0) {
    alert('No valid matches entered for the Away Team.');
    return;
  }

  const homeStats = getStats(homeMatches);
  const awayStats = getStats(awayMatches);

  const homePoints = homeStats.wins * 3 + homeStats.draws;
  const awayPoints = awayStats.wins * 3 + awayStats.draws;

  const homeAvgGF = homeStats.goalsFor / homeMatches.length;
  const homeAvgGA = homeStats.goalsAgainst / homeMatches.length;

  const awayAvgGF = awayStats.goalsFor / awayMatches.length;
  const awayAvgGA = awayStats.goalsAgainst / awayMatches.length;

  const homeStrength = homePoints + (homeAvgGF - homeAvgGA);
  const awayStrength = awayPoints + (awayAvgGF - awayAvgGA);

  const homeOddsFactor = 1 / homeOdd;
  const drawOddsFactor = 1 / drawOdd;
  const awayOddsFactor = 1 / awayOdd;

  const homeScore = homeStrength * 0.6 + homeOddsFactor * 0.4;
  const awayScore = awayStrength * 0.6 + awayOddsFactor * 0.4;

  let prediction = '';
  if (Math.abs(homeScore - awayScore) < 0.1) {
    prediction = 'Draw';
  } else if (homeScore > awayScore) {
    prediction = 'Home Win';
  } else {
    prediction = 'Away Win';
  }

  const csPrediction = predictCorrectScore(homeAvgGF, awayAvgGA);

  const outputDiv = document.getElementById('output');
  outputDiv.innerHTML = `
    <strong>Prediction:</strong> ${prediction}<br>
    <strong>Predicted Correct Score:</strong> ${csPrediction}<br>
    <hr>
    <strong>Home Team Stats (Last 6 Matches):</strong><br>
    Wins: ${homeStats.wins}, Draws: ${homeStats.draws}, Losses: ${homeStats.losses}<br>
    Goals For: ${homeStats.goalsFor.toFixed(1)}, Goals Against: ${homeStats.goalsAgainst.toFixed(1)}<br>
    <strong>Away Team Stats (Last 6 Matches):</strong><br>
    Wins: ${awayStats.wins}, Draws: ${awayStats.draws}, Losses: ${awayStats.losses}<br>
    Goals For: ${awayStats.goalsFor.toFixed(1)}, Goals Against: ${awayStats.goalsAgainst.toFixed(1)}<br>
    <hr>
    <strong>Additional Predictions:</strong><br>
    Double Chance: ${getDoubleChance(homeStats, awayStats)}<br>
    Over 2.5 Goals: ${getOver25(homeStats, awayStats)}<br>
    GG (Both Teams to Score): ${getGG(homeStats, awayStats)}
  `;
}

function getDoubleChance(homeStats, awayStats) {
  if (homeStats.wins > awayStats.wins) return "1X";
  if (awayStats.wins > homeStats.wins) return "X2";
  return "12";
}

function getOver25(homeStats, awayStats) {
  const totalGoals = homeStats.goalsFor + awayStats.goalsFor;
  return totalGoals >= 3 ? "Yes" : "No";
}

function getGG(homeStats, awayStats) {
  return homeStats.goalsFor > 0 && awayStats.goalsFor > 0 ? "Yes" : "No";
}

function saveData() {
  const finalResult = document.getElementById('finalResult').value.trim();
  if (!finalResult.match(/^\d+-\d+$/)) {
    alert('Please enter a valid final result in the format "X-Y", e.g. "2-1".');
    return;
  }

  let stored = localStorage.getItem('finalResults');
  let results = stored ? JSON.parse(stored) : [];
  results.push(finalResult);
  localStorage.setItem('finalResults', JSON.stringify(results));
  displayPreviousResults();
  document.getElementById('finalResult').value = '';
}

function displayPreviousResults() {
  let stored = localStorage.getItem('finalResults');
  let results = stored ? JSON.parse(stored) : [];
  const container = document.getElementById('previousMatches');
  if (results.length === 0) {
    container.innerHTML = '<em>No previous results saved yet.</em>';
    return;
  }
  container.innerHTML = '<h3>Previous Final Results</h3><ul>' +
    results.map(r => `<li>${r}</li>`).join('') +
    '</ul>';
}

// Initialize previous results on load
window.onload = displayPreviousResults;

</script>
</body>
  </html>
